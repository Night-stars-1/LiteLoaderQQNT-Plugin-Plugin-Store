import{d as x,l as d,a9 as y,h as r,aa as m,ab as F,ac as s,ad as T,ae as P,af as W,ag as j,ah as c,ai as E,al as X,am as f,ao as v,ap as k,aq as S,X as z,U as G,ar as H,as as J,at as K}from"./index.js";const M=x({__name:"App",setup(Q){const _=[],h=d(""),p=pluginStore.LiteLoader(),l=p.storeData,g=p.plugins[l.slug].manifest.repository,n=d(""),a=d([]),b=pluginStore.openWeb;async function L(){const o=await P(["https://mirror.ghproxy.com/","https://ghproxy.net/","https://moeyy.cn/gh-proxy/",""],`https://raw.githubusercontent.com/${g.repo}/${g.branch}/store.json`);h.value=o.url,o.data.map($)}L();async function $(e){try{e.install=await pluginStore.isSnippetInstall(l.slug,e.save_name)?"已安装":"安装"}catch{e.install="安装"}e.update="更新",e.restart=!1,_.push(e),a.value.push(e)}async function B(e){a.value[e].install="安装中";const o=`${h.value}${a.value[e].download}`,u=`${p.plugins[l.slug].path.data}/${l.save_folder}`;a.value[e].install=await pluginStore.downloadFile(o,a.value[e].save_name,u);try{a.value[e].restart=await pluginStore.isSnippetRestart(l.slug,a.value[e].save_name)?"重启":!1}catch{a.value[e].restart="重启"}}function D(){a.value=_.filter(e=>e.name.toLowerCase().includes(n.value.toLowerCase())||e.slug.toLowerCase().includes(n.value.toLowerCase())||e.description.toLowerCase().includes(n.value.toLowerCase()))}function V(e){a.value[e].restart="重启中",pluginStore.restart()}function R(){try{return document.querySelectorAll(".q-scroll-view")[1]}catch{return document}}return(e,o)=>{const u=W,i=z,q=G,A=H,I=J,N=j,U=X;return c(),y(T,null,[r(u,{modelValue:m(n),"onUpdate:modelValue":o[0]||(o[0]=t=>F(n)?n.value=t:null),class:"mb-4",onChange:D},null,8,["modelValue"]),r(N,null,{default:s(()=>[(c(!0),y(T,null,E(m(a),(t,C)=>(c(),f(I,{key:t.name,xs:12,md:6},{default:s(()=>[r(A,{title:t.name,description:t.description,"hover-shadow":"","header-bordered":"",class:"mx-1 mb-4 plugin"},{actions:s(()=>[r(q,{direction:"vertical",align:"center"},{default:s(()=>[r(i,{variant:"outline",theme:"default",onClick:w=>m(b)(t.details)},{default:s(()=>[v(" 详细 ")]),_:2},1032,["onClick"]),t.download?(c(),f(i,{key:0,variant:"outline",theme:"default",disabled:t.install!=="安装",onClick:w=>B(C)},{default:s(()=>[v(k(t.install),1)]),_:2},1032,["disabled","onClick"])):S("",!0),t.restart?(c(),f(i,{key:1,variant:"outline",theme:"default",disabled:t.restart!=="重启",onClick:w=>V(C)},{default:s(()=>[v(k(t.restart),1)]),_:2},1032,["disabled","onClick"])):S("",!0)]),_:2},1024)]),_:2},1032,["title","description"])]),_:2},1024))),128))]),_:1}),r(U,{container:R,"visible-height":200,class:"fixed-element"})],64)}}}),O=K(M);O.mount(".pluginStore");
