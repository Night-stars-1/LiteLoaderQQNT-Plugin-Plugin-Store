import{d as x,m as d,ad as y,h as r,ae as m,af as F,ag as s,ah as k,ai as P,aj as U,ak as W,al as c,am as E,ao as z,ap as f,ar as v,as as T,at as S,a1 as G,$ as H,au as J,av as K,y as M}from"./index.js";const O=x({__name:"App",setup(X){const _=[],h=d(""),p=pluginStore.LiteLoader(),l=p.storeData,g=p.plugins[l.slug].manifest.repository,n=d(""),a=d([]),b=pluginStore.openWeb;async function L(){const o=await P(["https://mirror.ghproxy.com/","https://ghproxy.net/","https://moeyy.cn/gh-proxy/",""],`https://raw.githubusercontent.com/${g.repo}/${g.branch}/store.json`);h.value=o.url,o.data.map($)}L();async function $(e){try{e.install=await pluginStore.isSnippetInstall(l.slug,e.save_name)?"已安装":"安装"}catch{e.install="安装"}e.update="更新",e.restart=!1,_.push(e),a.value.push(e)}async function B(e){a.value[e].install="安装中";const o=`${h.value}${a.value[e].download}`,u=`${p.plugins[l.slug].path.data}/${l.save_folder}`;a.value[e].install=await pluginStore.downloadFile(o,a.value[e].save_name,u);try{a.value[e].restart=await pluginStore.isSnippetRestart(l.slug,a.value[e].save_name)?"重启":!1}catch{a.value[e].restart="重启"}}function D(){a.value=_.filter(e=>e.name.toLowerCase().includes(n.value.toLowerCase())||e.slug.toLowerCase().includes(n.value.toLowerCase())||e.description.toLowerCase().includes(n.value.toLowerCase()))}function V(e){a.value[e].restart="重启中",pluginStore.restart()}function R(){try{return document.querySelectorAll(".q-scroll-view")[1]}catch{return document}}return(e,o)=>{const u=U,i=G,A=H,I=J,N=K,j=W,q=z;return c(),y(k,null,[r(u,{modelValue:m(n),"onUpdate:modelValue":o[0]||(o[0]=t=>F(n)?n.value=t:null),class:"mb-4",onChange:D},null,8,["modelValue"]),r(j,null,{default:s(()=>[(c(!0),y(k,null,E(m(a),(t,C)=>(c(),f(N,{key:t.name,xs:12,md:6},{default:s(()=>[r(I,{title:t.name,description:t.description,"hover-shadow":"","header-bordered":"",class:"mx-1 mb-4 plugin"},{actions:s(()=>[r(A,{direction:"vertical",align:"center"},{default:s(()=>[r(i,{variant:"outline",theme:"default",onClick:w=>m(b)(t.details)},{default:s(()=>[v(" 详细 ")]),_:2},1032,["onClick"]),t.download?(c(),f(i,{key:0,variant:"outline",theme:"default",disabled:t.install!=="安装",onClick:w=>B(C)},{default:s(()=>[v(T(t.install),1)]),_:2},1032,["disabled","onClick"])):S("",!0),t.restart?(c(),f(i,{key:1,variant:"outline",theme:"default",disabled:t.restart!=="重启",onClick:w=>V(C)},{default:s(()=>[v(T(t.restart),1)]),_:2},1032,["disabled","onClick"])):S("",!0)]),_:2},1024)]),_:2},1032,["title","description"])]),_:2},1024))),128))]),_:1}),r(q,{container:R,"visible-height":200,class:"fixed-element"})],64)}}}),Q=M(O);Q.mount(".pluginStore");
